<form #suplidorForm="ngForm" (ngSubmit)="submit(suplidorForm)" class="suplidor-form">
  <div class="section-title">Información General</div>
  <div class="row">
    <div class="col-md-4">
      <div class="form-group">
        <label>Código del Suplidor <span class="text-danger">*</span></label>
        <input type="text" class="form-control" name="codigo" [(ngModel)]="formData.codigo" required [readonly]="readOnly">
      </div>
    </div>
    <div class="col-md-5">
      <div class="form-group">
        <label>Nombre / Razón Social <span class="text-danger">*</span></label>
        <input type="text" class="form-control" name="nombre" [(ngModel)]="formData.nombre" required [readonly]="readOnly">
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group">
        <label>Identificación <span class="text-danger">*</span></label>
        <input type="text" class="form-control" name="identificacion" [(ngModel)]="formData.identificacion" required [readonly]="readOnly">
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-4">
      <div class="form-group">
        <label>Tipo de Suplidor</label>
        <select class="form-control" name="tipoSuplidor" [(ngModel)]="formData.tipoSuplidor" [disabled]="readOnly">
          <option *ngFor="let tipo of tipoOptions" [value]="tipo">{{ tipo }}</option>
        </select>
      </div>
    </div>
    <div class="col-md-4">
      <div class="form-group">
        <label>Contacto Principal</label>
        <input type="text" class="form-control" name="contacto" [(ngModel)]="formData.contacto" [readonly]="readOnly">
      </div>
    </div>
    <div class="col-md-4">
      <div class="form-group form-check mt-4">
        <input class="form-check-input" type="checkbox" id="activo" name="activo" [(ngModel)]="formData.activo" [disabled]="readOnly">
        <label class="form-check-label" for="activo">Activo</label>
      </div>
    </div>
  </div>

  <div class="section-title">Información de Contacto</div>
  <div class="row">
    <div class="col-md-4">
      <div class="form-group">
        <label>Email</label>
        <input type="email" class="form-control" name="email" [(ngModel)]="formData.email" email [readonly]="readOnly" placeholder="correo@ejemplo.com">
      </div>
    </div>
    <div class="col-md-4">
      <div class="form-group">
        <label>Teléfono 1</label>
        <input type="tel" class="form-control" name="telefono1" [(ngModel)]="formData.telefono1" [readonly]="readOnly">
      </div>
    </div>
    <div class="col-md-4">
      <div class="form-group">
        <label>Teléfono 2</label>
        <input type="tel" class="form-control" name="telefono2" [(ngModel)]="formData.telefono2" [readonly]="readOnly">
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <div class="form-group">
        <label>Dirección</label>
        <input type="text" class="form-control" name="direccion" [(ngModel)]="formData.direccion" [readonly]="readOnly">
      </div>
    </div>
    <div class="col-md-2">
      <div class="form-group">
        <label>Provincia</label>
        <input type="text" class="form-control" name="provincia" [(ngModel)]="formData.provincia" [readonly]="readOnly">
      </div>
    </div>
    <div class="col-md-2">
      <div class="form-group">
        <label>Cantón</label>
        <input type="text" class="form-control" name="canton" [(ngModel)]="formData.canton" [readonly]="readOnly">
      </div>
    </div>
    <div class="col-md-2">
      <div class="form-group">
        <label>Distrito</label>
        <input type="text" class="form-control" name="distrito" [(ngModel)]="formData.distrito" [readonly]="readOnly">
      </div>
    </div>
  </div>

  <div class="section-title">Información Operativa</div>
  <div class="row">
    <div class="col-md-6">
      <div class="form-group">
        <label>Servicios que presta</label>
        <div class="checkbox-grid">
          <div class="form-check" *ngFor="let servicio of servicioOptions">
            <input
              class="form-check-input"
              type="checkbox"
              [id]="servicio"
              [checked]="formData.servicios.includes(servicio)"
              (change)="toggleServicio(servicio, $event.target.checked)"
              [disabled]="readOnly">
            <label class="form-check-label" [for]="servicio">{{ servicio }}</label>
          </div>
        </div>
        <small class="text-muted d-block">Se recomienda seleccionar al menos un servicio.</small>
        <small class="text-warning" *ngIf="servicesWarning">Asocia al menos un servicio para control operativo.</small>
      </div>
    </div>
    <div class="col-md-6">
      <div class="form-group">
        <label>Observaciones</label>
        <textarea class="form-control" name="observaciones" [(ngModel)]="formData.observaciones" rows="3" [readonly]="readOnly"></textarea>
      </div>
    </div>
  </div>

  <div class="section-title">Información Comercial</div>
  <div class="row">
    <div class="col-md-4">
      <div class="form-group">
        <label>Forma de pago preferida</label>
        <select class="form-control" name="formaPagoPreferida" [(ngModel)]="formData.formaPagoPreferida" [disabled]="readOnly">
          <option *ngFor="let forma of formaPagoOptions" [value]="forma">{{ forma }}</option>
        </select>
      </div>
    </div>
    <div class="col-md-4">
      <div class="form-group">
        <label>Moneda de pago</label>
        <select class="form-control" name="monedaPago" [(ngModel)]="formData.monedaPago" [disabled]="readOnly">
          <option *ngFor="let moneda of monedaOptions" [value]="moneda">{{ moneda }}</option>
        </select>
      </div>
    </div>
    <div class="col-md-4">
      <div class="form-group">
        <label>Condiciones especiales</label>
        <input type="text" class="form-control" name="condicionesEspeciales" [(ngModel)]="formData.condicionesEspeciales" placeholder="Plazos, notas comerciales..." [readonly]="readOnly">
      </div>
    </div>
  </div>

  <div class="d-flex justify-content-end mt-3">
    <button type="button" class="btn btn-light mr-2" (click)="cancelForm()">{{ readOnly ? 'Cerrar' : 'Cancelar' }}</button>
    <button *ngIf="!readOnly" type="submit" class="btn btn-primary" [disabled]="!suplidorForm.form.valid">Guardar</button>
  </div>
</form>
